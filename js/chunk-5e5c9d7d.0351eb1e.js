(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e5c9d7d"],{"1dde":function(t,e,c){var n=c("d039"),a=c("b622"),r=c("2d00"),o=a("species");t.exports=function(t){return r>=51||!n((function(){var e=[],c=e.constructor={};return c[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3a74":function(t,e,c){"use strict";c("f96d")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,c){var n=c("e330"),a=c("1d80"),r=c("577e"),o=c("5899"),s=n("".replace),i="["+o+"]",l=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),b=function(t){return function(e){var c=r(a(e));return 1&t&&(c=s(c,l,"")),2&t&&(c=s(c,u,"")),c}};t.exports={start:b(1),end:b(2),trim:b(3)}},7156:function(t,e,c){var n=c("1626"),a=c("861d"),r=c("d2bb");t.exports=function(t,e,c){var o,s;return r&&n(o=e.constructor)&&o!==c&&a(s=o.prototype)&&s!==c.prototype&&r(t,s),t}},8418:function(t,e,c){"use strict";var n=c("a04b"),a=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var o=n(e);o in t?a.f(t,o,r(0,c)):t[o]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),a=c("da84"),r=c("d039"),o=c("e8b5"),s=c("861d"),i=c("7b0b"),l=c("07fa"),u=c("8418"),b=c("65f0"),d=c("1dde"),f=c("b622"),p=c("2d00"),h=f("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",m=a.TypeError,v=p>=51||!r((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=d("concat"),y=function(t){if(!s(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},k=!v||!g;n({target:"Array",proto:!0,forced:k},{concat:function(t){var e,c,n,a,r,o=i(this),s=b(o,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(r=-1===e?o:arguments[e],y(r)){if(a=l(r),d+a>O)throw m(j);for(c=0;c<a;c++,d++)c in r&&u(s,d,r[c])}else{if(d>=O)throw m(j);u(s,d++,r)}return s.length=d,s}})},a10a:function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a={class:"container mb-5 cart-content"},r={key:0,class:"row"},o={class:"cart-none text-center"},s=Object(n["h"])("div",{class:"none-text"},"尚未選購商品～",-1),i={class:"none-btn"},l=Object(n["j"])("去購物"),u={key:1,class:"row"},b={key:0,class:"cart-table m-auto"},d={class:"text-center"},f=Object(n["h"])("thead",null,[Object(n["h"])("tr",null,[Object(n["h"])("th",null,"產品圖"),Object(n["h"])("th",null,"產品名"),Object(n["h"])("th",null,"數量"),Object(n["h"])("th",null,"價格"),Object(n["h"])("th",null,"刪除")])],-1),p={class:"cart-pic"},h={class:"cart-img"},O=["src"],j={class:"card-prod"},m={class:"cart-qty"},v={class:"cart-btn"},g=["disabled","onClick"],y=["disabled","onClick"],k={class:"del-btn"},C=["onClick"],w={key:1,class:"cart-price"},x=Object(n["h"])("span",{class:"text-end"},"商品金額",-1),A={class:"text-end"},I={key:3,class:"cart-coupon"},N={key:0},_={key:4,class:"coupon-input m-auto mb-5"},E={class:"coupon-btn"},T={key:5,class:"process-btn d-flex m-auto justify-content-between"},V=Object(n["j"])("繼續購物"),$={key:6,class:"row m-auto justify-content-center"},q={class:"mb-3"},S=Object(n["h"])("label",{for:"email",class:"form-label"},"電子郵箱",-1),L={class:"mb-3"},B=Object(n["h"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),F={class:"mb-3"},U=Object(n["h"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),K={class:"mb-3"},M=Object(n["h"])("label",{for:"address",class:"form-label"},"收件人地址",-1),R={class:"mb-3"},X=Object(n["h"])("label",{for:"message",class:"form-label"},"留言",-1),P={class:"submit-btn d-flex justify-content-between"},G=Object(n["h"])("button",null,"送出訂單",-1);function W(t,e,c,W,Y,J){var D=Object(n["K"])("CustomLoading"),z=Object(n["K"])("CartProgressBar"),H=Object(n["K"])("router-link"),Q=Object(n["K"])("font-awesome-icon"),Z=Object(n["K"])("CouponBar"),tt=Object(n["K"])("Field"),et=Object(n["K"])("ErrorMessage"),ct=Object(n["K"])("Form");return Object(n["A"])(),Object(n["g"])(n["a"],null,[Object(n["k"])(D,{active:Y.isLoading},null,8,["active"]),Object(n["h"])("div",a,[Object(n["k"])(z,{class:"",step:Y.step},null,8,["step"]),0===Y.cartLength?(Object(n["A"])(),Object(n["g"])("div",r,[Object(n["h"])("div",o,[s,Object(n["h"])("div",i,[Object(n["k"])(H,{to:"/products/all"},{default:Object(n["W"])((function(){return[l]})),_:1})])])])):(Object(n["A"])(),Object(n["g"])("div",u,[0===Y.step?(Object(n["A"])(),Object(n["g"])("div",b,[Object(n["h"])("table",d,[f,Object(n["h"])("tbody",null,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["I"])(Y.cart.carts,(function(e){return Object(n["A"])(),Object(n["g"])("tr",{class:"cart-item",key:e.id},[Object(n["h"])("td",p,[Object(n["h"])("div",h,[Object(n["h"])("img",{src:e.product.imageUrl,alt:""},null,8,O)])]),Object(n["h"])("td",null,[Object(n["h"])("div",j,Object(n["N"])(e.product.title),1)]),Object(n["h"])("td",null,[Object(n["h"])("div",m,[Object(n["h"])("div",v,[Object(n["h"])("button",{disabled:e.qty<=1,onClick:function(t){return J.addToCart(e,-1),e.qty--}},[Object(n["k"])(Q,{icon:"minus"})],8,g),Object(n["h"])("span",null,Object(n["N"])(e.qty),1),Object(n["h"])("button",{disabled:e.qty>=10,onClick:function(t){return J.addToCart(e,1),e.qty++}},[Object(n["k"])(Q,{icon:"plus"})],8,y)])])]),Object(n["h"])("td",null,Object(n["N"])(t.$filters.currency(e.final_total)),1),Object(n["h"])("td",k,[Object(n["h"])("button",{onClick:function(t){return J.removeCartItem(e.id)},type:"button"},[Object(n["k"])(Q,{icon:"trash"})],8,C)])])})),128))])])])):Object(n["f"])("",!0),0===Y.step?(Object(n["A"])(),Object(n["g"])("div",w,[x,Object(n["h"])("span",A,Object(n["N"])(t.$filters.currency(Y.cart.final_total)),1)])):Object(n["f"])("",!0),0===Y.step?(Object(n["A"])(),Object(n["e"])(Z,{key:2})):Object(n["f"])("",!0),0===Y.step?(Object(n["A"])(),Object(n["g"])("div",I,[Y.cart.final_total!==Y.cart.total?(Object(n["A"])(),Object(n["g"])("p",N,"已使用優惠券")):Object(n["f"])("",!0)])):Object(n["f"])("",!0),0===Y.step?(Object(n["A"])(),Object(n["g"])("div",_,[Object(n["X"])(Object(n["h"])("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return Y.coupon_code=t}),placeholder:"請輸入優惠碼"},null,512),[[n["R"],Y.coupon_code]]),Object(n["h"])("div",E,[Object(n["h"])("button",{type:"button",onClick:e[1]||(e[1]=function(){return J.addCouponCode&&J.addCouponCode.apply(J,arguments)})},"使用優惠碼")])])):Object(n["f"])("",!0),0===Y.step?(Object(n["A"])(),Object(n["g"])("div",T,[Object(n["k"])(H,{to:"/products/all"},{default:Object(n["W"])((function(){return[V]})),_:1}),Object(n["h"])("button",{onClick:e[2]||(e[2]=function(t){return Y.step++}),type:"button"},"下一步")])):Object(n["f"])("",!0),1===Y.step?(Object(n["A"])(),Object(n["g"])("div",$,[Object(n["k"])(ct,{class:"col-md-8 cart-form",onSubmit:J.createOrder},{default:Object(n["W"])((function(t){var c=t.errors;return[Object(n["h"])("div",q,[S,Object(n["k"])(tt,{id:"email",name:"email",type:"email",class:Object(n["s"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:Y.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return Y.form.user.email=t})},null,8,["class","modelValue"]),Object(n["k"])(et,{name:"email",class:"invalid-feedback"})]),Object(n["h"])("div",L,[B,Object(n["k"])(tt,{id:"name",name:"姓名",type:"text",class:Object(n["s"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:Y.form.user.name,"onUpdate:modelValue":e[4]||(e[4]=function(t){return Y.form.user.name=t})},null,8,["class","modelValue"]),Object(n["k"])(et,{name:"姓名",class:"invalid-feedback"})]),Object(n["h"])("div",F,[U,Object(n["k"])(tt,{id:"tel",name:"電話",type:"tel",class:Object(n["s"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:Y.form.user.tel,"onUpdate:modelValue":e[5]||(e[5]=function(t){return Y.form.user.tel=t})},null,8,["class","modelValue"]),Object(n["k"])(et,{name:"電話",class:"invalid-feedback"})]),Object(n["h"])("div",K,[M,Object(n["k"])(tt,{id:"address",name:"地址",type:"text",class:Object(n["s"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:Y.form.user.address,"onUpdate:modelValue":e[6]||(e[6]=function(t){return Y.form.user.address=t})},null,8,["class","modelValue"]),Object(n["k"])(et,{name:"地址",class:"invalid-feedback"})]),Object(n["h"])("div",R,[X,Object(n["X"])(Object(n["h"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[7]||(e[7]=function(t){return Y.form.message=t})},null,512),[[n["R"],Y.form.message]])]),Object(n["h"])("div",P,[Object(n["h"])("a",{onClick:e[8]||(e[8]=Object(n["Y"])((function(t){return Y.step--}),["prevent"]))},"上一步"),G])]})),_:1},8,["onSubmit"])])):Object(n["f"])("",!0)]))])],64)}c("99af");var Y=c("a866"),J=function(t){return Object(n["D"])("data-v-419454ee"),t=t(),Object(n["B"])(),t},D={class:"coupon-bar"},z=J((function(){return Object(n["h"])("p",null,"慶祝！期間限定優惠 輸入 cheer4 獲得優惠",-1)})),H=[z];function Q(t,e){return Object(n["A"])(),Object(n["g"])("div",D,H)}c("3a74");var Z=c("6b0d"),tt=c.n(Z);const et={},ct=tt()(et,[["render",Q],["__scopeId","data-v-419454ee"]]);var nt=ct,at={components:{CartProgressBar:Y["a"],CouponBar:nt},data:function(){return{isLoading:!1,products:[],product:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},cartLength:"",coupon_code:"",qty:null,step:0}},watch:{cartLength:function(){0===this.cartLength&&this.goBuy()}},emits:["update-qty"],methods:{getCart:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("tb-ecommerce","/cart");this.$emit("update-qty"),this.$http.get(e).then((function(e){t.cart=e.data.data,t.cartLength=e.data.data.carts.length}))},addToCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("tb-ecommerce","/cart"),a={product_id:t.product_id,qty:c};this.$http.post(n,{data:a}).then((function(){e.getCart(),e.$swal.fire({icon:"success",title:"已更新訂單"})}))},removeCartItem:function(t){var e=this;this.$swal.fire({toast:!1,position:"center",icon:"warning",title:"確定要刪除該項商品？",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"確定",customClass:{title:"custom-text-class"},timer:!1}).then((function(c){if(c.isConfirmed){var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("tb-ecommerce","/cart/").concat(t);e.$http.delete(n).then((function(t){t.data.success&&(e.$emit("update-qty"),e.getCart(),e.$swal.fire({icon:"success",title:"已刪除品項"}))}))}}))},addCouponCode:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("tb-ecommerce","/coupon"),c={code:this.coupon_code};this.$http.post(e,{data:c}).then((function(e){var c=e.data.success;!0===c?(t.$swal.fire({icon:"success",title:"已使用優惠券"}),t.getCart()):t.$swal.fire({icon:"warning",title:"無效優惠碼 請重新輸入"})}))},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("tb-ecommerce","/order"),c=this.form;this.$http.post(e,{data:c}).then((function(e){var c=e.data.orderId;t.$router.push("./checkout/".concat(c))}))},goBuy:function(){var t=this;this.$swal.fire({toast:!1,position:"center",icon:"info",title:"購物車為空",html:"<span class='custom-text-class'>即將跳轉商品區<span>",timer:2500}).then((function(){t.$router.push("/products/all")}))},loadingOn:function(){var t=this;this.isLoading=!0,setTimeout((function(){t.isLoading=!1}),1500)}},created:function(){this.loadingOn(),this.getCart()}};const rt=tt()(at,[["render",W]]);e["default"]=rt},a866:function(t,e,c){"use strict";var n=c("7a23"),a={class:"row mb-5 cart-progress"};function r(t,e,c,r,o,s){return Object(n["A"])(),Object(n["g"])("div",a,[(Object(n["A"])(!0),Object(n["g"])(n["a"],null,Object(n["I"])(o.progress,(function(t){return Object(n["A"])(),Object(n["g"])("div",{class:"col-md-3 mb-3",key:t.id},[Object(n["h"])("div",{class:Object(n["s"])(["text-center progress-text",{active:c.step===t.id}])},Object(n["N"])(t.step),3)])})),128))])}c("a9e3");var o={props:{step:{type:Number,required:!0}},data:function(){return{progress:[{id:0,step:"確認商品"},{id:1,step:"填寫資料"},{id:2,step:"完成訂購"}]}},watch:{step:function(t,e){t!==e&&this.scrollToTop()}},methods:{scrollToTop:function(){window.scrollTo(0,0)}}},s=c("6b0d"),i=c.n(s);const l=i()(o,[["render",r]]);e["a"]=l},a9e3:function(t,e,c){"use strict";var n=c("83ab"),a=c("da84"),r=c("e330"),o=c("94ca"),s=c("6eeb"),i=c("1a2d"),l=c("7156"),u=c("3a9b"),b=c("d9b5"),d=c("c04e"),f=c("d039"),p=c("241c").f,h=c("06cf").f,O=c("9bf2").f,j=c("408a"),m=c("58a8").trim,v="Number",g=a[v],y=g.prototype,k=a.TypeError,C=r("".slice),w=r("".charCodeAt),x=function(t){var e=d(t,"number");return"bigint"==typeof e?e:A(e)},A=function(t){var e,c,n,a,r,o,s,i,l=d(t,"number");if(b(l))throw k("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=m(l),e=w(l,0),43===e||45===e){if(c=w(l,2),88===c||120===c)return NaN}else if(48===e){switch(w(l,1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(r=C(l,2),o=r.length,s=0;s<o;s++)if(i=w(r,s),i<48||i>a)return NaN;return parseInt(r,n)}return+l};if(o(v,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var I,N=function(t){var e=arguments.length<1?0:g(x(t)),c=this;return u(y,c)&&f((function(){j(c)}))?l(Object(e),c,N):e},_=n?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),E=0;_.length>E;E++)i(g,I=_[E])&&!i(N,I)&&O(N,I,h(g,I));N.prototype=y,y.constructor=N,s(a,v,N)}},b0c0:function(t,e,c){var n=c("83ab"),a=c("5e77").EXISTS,r=c("e330"),o=c("9bf2").f,s=Function.prototype,i=r(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=r(l.exec),b="name";n&&!a&&o(s,b,{configurable:!0,get:function(){try{return u(l,i(this))[1]}catch(t){return""}}})},f96d:function(t,e,c){}}]);
//# sourceMappingURL=chunk-5e5c9d7d.0351eb1e.js.map